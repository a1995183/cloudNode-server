webpackJsonp([3],{"+cgv":function(t,e){},"04nY":function(t,e){},"3f40":function(t,e){},"4qOc":function(t,e){},"5BWM":function(t,e){},"9CVt":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"layout-header"},[n("div",{staticClass:"w1170 wrap"},[n("h1",{on:{click:function(e){t.$router.push("/")}}},[t._v("云楷笔记")]),t._v(" "),n("i",{staticClass:"el-icon-search    icon-search"}),t._v(" "),n("el-button",{staticClass:"write-btn",on:{click:t.writeNodeTo}},[t._v("\n    写笔记")])],1)])},staticRenderFns:[]};var o={components:{Header:n("VU/8")({data:function(){return{}},methods:{writeNodeTo:function(){this.$store.state.userInfo.username?this.$router.push("/writeNode"):this.$message("请先登录!")}}},s,!1,function(t){n("apsJ")},"data-v-3caae2d7",null).exports},data:function(){return{}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout"},[e("Header"),this._v(" "),e("div",{staticClass:"w1170 content"},[e("router-view")],1)],1)},staticRenderFns:[]};var r={name:"App",components:{Layout:n("VU/8")(o,i,!1,function(t){n("ufVn")},"data-v-4aab626c",null).exports}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Layout")],1)},staticRenderFns:[]};var l=n("VU/8")(r,c,!1,function(t){n("04nY")},null,null).exports,u=n("/ocq"),d=n("Dd8w"),m=n.n(d),f=n("NYxO"),p={data:function(){return{form:{email:"",password:""},content:[],total:11111,size:10,pn:1}},methods:{getData:function(){var t=this,e={author:this.userInfo._id,size:this.size,pn:this.pn};this.$axios.get("./article",e).then(function(e){t.content=e.data,t.total=parseInt(e.total)})},handleLogin:function(){var t=this,e=this.form;this.$axios.post("/login",e).then(function(e){200==e.code?(t.$message("登陆成功，欢迎回来"+e.data.username),t.$store.commit("CHANGE_userInfo",e.data),t.getData()):t.$message(e.msg)})},clearLogin:function(){var t=this,e={username:"",email:"",avator:"",password:""};this.$axios.get("/layout").then(function(n){200==n.code?(t.$message.success(n.msg),t.$store.commit("CHANGE_userInfo",e)):(t.$message("登录已过期"),t.$store.commit("CHANGE_userInfo",e)),t.getData()})},gopn:function(t){this.pn=t,this.getData()}},computed:m()({},Object(f.b)(["userInfo"])),created:function(){this.getData()}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"body"},[n("div",{staticClass:"top-box"},[t._m(0),t._v(" "),t.userInfo.username?n("div",{staticClass:"img-right"},[n("div",{staticClass:"img-user"},[n("img",{attrs:{width:"150",height:"150",src:t.userInfo.avatar}})]),t._v(" "),n("div",{staticClass:"user-name"},[t._v("\n                            用户名:"+t._s(t.userInfo.username)+"\n                        ")]),t._v(" "),n("div",{staticClass:"user-email"},[t._v("\n                            邮箱地址："+t._s(t.userInfo.email)+"\n                        ")]),t._v(" "),n("div",{staticClass:"user-button"},[n("el-button",{attrs:{type:"info"},on:{click:t.clearLogin}},[t._v(" 退出登录")])],1)]):n("div",{staticClass:"img-right"},[n("el-form",{staticClass:"demo-ruleForm",attrs:{model:t.form,"label-width":"220px"}},[n("el-form-item",[n("el-input",{staticClass:"input",attrs:{placeholder:"用户名"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("el-form-item",[n("el-input",{staticClass:"input",attrs:{placeholder:"密码",type:"password"},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleLogin(e):null}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.handleLogin}},[t._v("登录")]),t._v(" "),n("el-button",{staticClass:"button-zc",attrs:{type:"primary",plain:""},on:{click:function(e){t.$router.push("/region")}}},[t._v("注册")])],1)],1)],1)]),t._v(" "),n("div",{staticClass:"box-bottom-all"},[n("div",{staticClass:"box-bottom"},[t._l(t.content,function(e){return n("div",{key:e._id,staticClass:"bottom-item"},[n("router-link",{attrs:{to:{name:"article",params:{id:e._id}}}},[n("div",{staticClass:"left-img"},[n("img",{attrs:{width:"70",height:"70",src:e.author.avatar}})]),t._v(" "),n("div",{staticClass:"right-text"},[n("p",{staticStyle:{"font-size":"16px"}},[n("span",{staticClass:"name",staticStyle:{"font-weight":"400",color:"#409eff"},domProps:{textContent:t._s(e.author.username)}}),t._v(" "),n("i",{staticClass:"bottom-i"}),t._v(" "),n("span",{domProps:{textContent:t._s(e.title)}})]),t._v(" "),n("p",{staticClass:"lll"},[t._v("浏览："+t._s(e.readnumber)+"回复："+t._s(e.commonnum)+"分类："+t._s(e.category.name))])]),t._v(" "),n("div",{staticClass:"bottom-last"},[n("p",{staticStyle:{"font-size":"14px"}},[t._v(t._s(e.contentText))])])])],1)}),t._v(" "),n("el-pagination",{attrs:{"page-size":10,background:"","pager-count":11,layout:"prev, pager, next","current-page":t.pn,total:t.total},on:{"current-change":t.gopn}})],2)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"img-left"},[e("img",{attrs:{width:"750",height:"340",src:n("phMG"),alt:""}}),this._v(" "),e("p",{staticClass:"y13"},[this._v("13亿人都会用的云楷笔记")])])}]};var v=n("VU/8")(p,h,!1,function(t){n("5BWM")},"data-v-6973d232",null).exports,g=n("Y81h"),_=n.n(g),C=(n("UVIz"),n("3f40"),n("4qOc"),n("+cgv"),n("G0J2")),b=n("GH0r");C.Quill.register("modules/ImageExtend",b.a);var x={components:{quillEditor:C.quillEditor},data:function(){return{formdata:{content:"",contentText:"",title:"",category:""},categories:[],editorOption:{modules:{ImageExtend:{loading:!0,name:"img",action:"https://www.qiniu.com",response:function(t){return t.info}},toolbar:{container:b.c,handlers:{image:function(){b.b.emit(this.quill.id)}}}}}}},methods:{handleUpload:function(){var t=this,e=this.categories.findIndex(function(e){return e.name==t.formdata.category});-1==e?this.$message("请先选择类别"):(this.formdata.category=this.categories[e]._id,console.log(this.formdata),this.$axios.post("/article",this.formdata).then(function(e){200==e.code?(t.$message("upload success"),setTimeout(function(){t.$router.push("/")},500)):t.$message(e.msg)}))},handleChange:function(t){t.quill,t.html;var e=t.text;this.formdata.contentText=e,this.formdata.contentText=this.formdata.contentText.substring(0,200)+"..."},getCategory:function(){var t=this;this.$axios.get("/category").then(function(e){t.categories=e.data})}},created:function(){this.getCategory()}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"write-content w1170"},[n("div",{staticClass:"title-top"},[t._v("\n                    标题\n            ")]),t._v(" "),n("div",{staticClass:"el-input"},[n("el-input",{attrs:{placeholder:"测试标题"},model:{value:t.formdata.title,callback:function(e){t.$set(t.formdata,"title",e)},expression:"formdata.title"}})],1),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"content-title"},[t._v("内容")]),t._v(" "),n("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{change:t.handleChange},model:{value:t.formdata.content,callback:function(e){t.$set(t.formdata,"content",e)},expression:"formdata.content"}})],1),t._v(" "),n("h3",{staticStyle:{color:"blue",float:"left","margin-top":"35px"}},[t._v("分类：")]),t._v(" "),t._l(t.categories,function(e){return n("div",{key:e._id,staticClass:"text-type"},[n("el-radio-group",{attrs:{size:"medium"},model:{value:t.formdata.category,callback:function(e){t.$set(t.formdata,"category",e)},expression:"formdata.category"}},[n("el-radio-button",{attrs:{label:e.name}})],1)],1)}),t._v(" "),n("br"),t._v(" "),n("el-button",{staticClass:"btn-upload",attrs:{type:"primary"},on:{click:t.handleUpload}},[t._v("发布笔记")])],2)},staticRenderFns:[]};var w=n("VU/8")(x,y,!1,function(t){n("9CVt")},"data-v-fdd8d83c",null).exports;a.default.use(u.a);var $=new u.a({routes:[{path:"/",name:"index",component:v,meta:{title:"首页"}},{path:"/writeNode",name:"write",component:w,meta:{title:"写笔记"}},{path:"/region",name:"region",component:function(){return n.e(1).then(n.bind(null,"ntcu"))}},{path:"/article",name:"article",meta:{title:"文章"},component:function(){return n.e(0).then(n.bind(null,"AtFq"))}}]});$.beforeEach(function(t,e,n){_.a.start(),t.meta&&t.meta.title&&(document.title=t.meta.title),n()}),$.afterEach(function(t,e){_.a.done()});var I=$,k=n("//Fk"),E=n.n(k),q=n("mtWM"),z=n.n(q),N=z.a.create({baseURL:"apis",timeout:15e3}),U={get:function(t,e,n){return new E.a(function(a,s){N.get(t,{params:e},n).then(function(t){a(t.data)}).catch(function(t){s(t)})})},fetch:function(t,e,n,a){return new E.a(function(s,o){N[a](t,e,n).then(function(t){s(t.data)}).catch(function(t){o(t)})})},post:function(t,e,n){return this.fetch(t,e,n,"post")}},V=n("zL8q"),L=n.n(V),H=(n("tvR6"),z.a.create({baseURL:"/"}),n("424j"));a.default.use(f.a);var R=new f.a.Store({state:{userInfo:{avatar:"",email:"",username:""}},mutations:{CHANGE_userInfo:function(t,e){t.userInfo=e}},actions:{},plugins:[Object(H.a)({storage:{getItem:function(t){return sessionStorage.getItem(t)},setItem:function(t,e){return sessionStorage.setItem(t,e)},removeItem:function(t){return sessionStorage.removeItem(t)}}})]});a.default.use(L.a),a.default.config.productionTip=!1,a.default.prototype.$axios=U,new a.default({el:"#app",router:I,store:R,components:{App:l},template:"<App/>"})},UVIz:function(t,e){},apsJ:function(t,e){},phMG:function(t,e,n){t.exports=n.p+"static/img/banner.6d1fcb3.jpg"},tvR6:function(t,e){},ufVn:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.858cb2ad4121fc066c68.js.map